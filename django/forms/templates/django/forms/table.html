{% if errors %}
  <tr>
    <td colspan="2">
      {{ errors }}
      {% if not fields %}
        {% for field in hidden_fields %}{{ field }}{% endfor %}
      {% endif %}
    </td>
  </tr>
{% endif %}
{% for field in fields %}
  {{ field.as_table }}
  {% if forloop.last %}
    <td hidden>
      {% for field in hidden_fields %}{{ field }}{% endfor %}
    </td>
  {% endif %}
{% endfor %}
{% if not fields and not errors %}
  {% for field in hidden_fields %}{{ field }}{% endfor %}
{% endif %}
